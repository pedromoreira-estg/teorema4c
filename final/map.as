package  {		import flash.display.MovieClip;	import flash.events.MouseEvent;	import flash.events.Event;	import regiao;		// classe de mapa	public class map extends MovieClip{				// regioes de um amapa		public var regioes : Array = new Array();				// nome do evento para sinalizar uma mudancça de estado do mapa		public static const MUDA : String 					= "mudaMapa";						// completitude : com brancos		public static const INCOMPLETO : Boolean		= false;		// completitude : sem brancos		public static const COMPLETO : Boolean  		= true;				// correcao : com conflitos		public static const INCORRETO : Boolean  		= false;		// correcao : sem conflitos		public static const CORRETO : Boolean   		= true;				// resolvido (completo e correto)		public static const RESOLVIDO : Boolean			= true;		// nao resolvido (!completo ou !correto)		public static const NAORESOLVIDO : Boolean	= false;				public var correcao : Boolean 							= map.CORRETO;		public var completitude : Boolean 					= map.INCOMPLETO;		public var estado : Boolean 								= map.NAORESOLVIDO;		public function map() {			// constructor code			addEventListener(MouseEvent.CLICK,mudaCor);			//addEventListener(regiao.CONFLITO,onconflito);		}				public function onconflito(e:Event) {			//trace("ola - conflito");		}				public function mudaCor(e:MouseEvent) {			var muda : Boolean 	= false;			var comp 						= checkCompleto();			var corr 						= checkCorreto();						if (completitude != comp) {					completitude = comp;					muda = true;			}						if (correcao != corr) {					correcao = corr;					muda = true;			}								if (completitude && correcao) {				  estado = map.RESOLVIDO;			}						// trace("estado",estado);			// TODO : o evento poderia conter o estado do mapa						if (muda) {				// bubbling event (para poder ser "apanhado" pelos pais)				dispatchEvent(new Event(map.MUDA,true));				//trace("completo: ",checkCompleto());				//trace("correcto: ",checkCorreto());			}		}				public function resetMap() {			for each (var r:regiao in regioes) {				r.setCor = cores.BRANCO;			}			completitude = checkCompleto();			correcao 		 = checkCorreto();			dispatchEvent(new Event(map.MUDA,true)); 		}				public function checkCompleto() {						var completo 		= map.COMPLETO;			for each (var r:regiao in regioes) {				if (r.cor == cor.BRANCO) {					completo 		= map.INCOMPLETO;					break;				}			}		return completo;		}				public function checkCorreto() {						var correto 		= map.CORRETO;			for each (var r:regiao in regioes) {				if (r.checkConflito()) {					correto 		= map.INCORRETO;					break;				}			}		return correto;		}	}}